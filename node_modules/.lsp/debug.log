Hello - from /home/elias/.vscode/extensions/jaredly.reason-vscode-1.7.13/bin.native.linux
Previous log location: /tmp/lsp.log
Sending notification {"jsonrpc": "2.0", "method": "client/registerCapability", "params": {"registrations": [{"id": "watching", "method": "workspace/didChangeWatchedFiles", "registerOptions": {"watchers": [{"globPattern": "**/bsconfig.json"}, {"globPattern": "**/.merlin"}]}}]}}
Sending response {"id": 0, "jsonrpc": "2.0", "result": {"capabilities": {"textDocumentSync": 1, "hoverProvider": true, "completionProvider": {"resolveProvider": true, "triggerCharacters": ["."]}, "signatureHelpProvider": {"triggerCharacters": ["("]}, "definitionProvider": true, "typeDefinitionProvider": true, "referencesProvider": true, "documentSymbolProvider": true, "codeActionProvider": true, "executeCommandProvider": {"commands": ["reason-language-server.add_to_interface_inner"]}, "codeLensProvider": {"resolveProvider": true}, "documentHighlightProvider": true, "documentRangeFormattingProvider": true, "documentFormattingProvider": true, "renameProvider": true}}}
Read message 
{"jsonrpc":"2.0","method":"initialized","params":{}}
Read message 
{"jsonrpc":"2.0","method":"workspace/didChangeConfiguration","params":{"settings":{"reason_language_server":{"location":"","build_system_override_by_root":{},"refmt":"","lispRefmt":"","mlfmt":"","format_width":80,"per_value_codelens":false,"dependencies_codelens":true,"opens_codelens":true,"show_module_path_on_hover":true,"reloadOnChange":false,"show_debug_errors":false,"autoRebuild":true}}}}
Read message 
{"jsonrpc":"2.0","method":"textDocument/didOpen","params":{"textDocument":{"uri":"file:///home/elias/OCP/ez_pb_client/src/reqs/reqs.ml","languageId":"ocaml","version":1,"text":"open Data_types\nopen Bcrypt\nopen Utils\nopen Lwt.Infix\nopen EzAPI\nopen EzAPI.TYPES\n\n(* Absolute trash ... Impossible to run any request ... *)\n\nlet api_port = ref 8080\nlet user1_login = \"test_user60\"\nlet user1_password = \"dummydedada1234!\"\nlet user1_info = \"This user is also here for testing purposes\"\n\n(* lwt management *)\nlet waiter, finalizer = Lwt.wait ()\nlet waiting = ref false\nlet nrequests = ref 0\nlet begin_request () = incr nrequests\n\nlet end_request () =\n  decr nrequests;\n  if !waiting && !nrequests = 0 then Lwt.wakeup finalizer ()\n(* // *)\n\ntype 'res response = ('res, server_error_type) result\n(** Polymorphic response type from search-api. *)\n\n(** Handler that converts [ez_api] error structure to [response] *)\nlet handle_error err =\n  Lwt.return\n  @@\n  match err with\n  | EzReq_lwt_S.UnknownError _ -> Error Unknown\n  | EzReq_lwt_S.KnownError { error; _ } -> Error error\n\nlet handle_response (resp : 'res) : 'res response Lwt.t = Lwt.return @@ Ok resp\n(* Data examples *)\n\nlet user_test1 =\n  {\n    username = \"test_user0\";\n    email = \"azwbdklo@gmail.com\";\n    password = \"dummy1234!\";\n    user_desc = \"This user is here for testing purposes\";\n    first_login_date = \"25-04-1997 20:45:30\";\n  }\n\nlet user_test2 =\n  {\n    username = \"test_user1\";\n    email = \"azwbdj@hotmail.com\";\n    password = \"dummy1234!\";\n    user_desc = \"This user is also here for testing purposes\";\n    first_login_date = \"25-04-1997 20:45:30\";\n  }\n\nlet user_test3 =\n  {\n    username = \"test_user3\";\n    email = \"example@gmail.com\";\n    password = \"dummydedada1234!\";\n    user_desc = \"This user is also here for testing purposes\";\n    first_login_date = \"25-04-1997 20:45:30\";\n  }\n\nlet test_user4 =\n  {\n    username = \"test_user2\";\n    email = \"elias.ben@gmail.com\";\n    password = \"Testing123%!\";\n    user_desc = \"User added from postman\";\n    first_login_date = \"irrelevant\";\n  }\n\nlet user_test_tyler =\n  {\n    username = \"tyler\";\n    email = \"tyler_durden@gmail.com\";\n    password = \"2ndRulerefRule1$!\";\n    user_desc = \"3rd user for testing only\";\n    first_login_date = \"2022-08-07 14:45:52.523274\";\n  }\n\nlet user_test_marla =\n  {\n    username = \"marla\";\n    email = \"marla1991@hotmail.fr\";\n    password = \"Rule1$!%\";\n    user_desc = \"Here for testing only\";\n    first_login_date = \"2022-08-07 14:45:52.523274\";\n  }\n\nlet user_test_james =\n  {\n    username = \"james\";\n    email = \"james.dean@gmail.com\";\n    password = \"examPlePass1!\";\n    user_desc = \"test user 1\";\n    first_login_date = \"2022-08-07 14:45:52.523274\";\n  }\n\nlet default_users_list = [ user_test1; user_test2; user_test3 ]\n\n(** Default error handler *)\nlet default_error_handler err =\n  (match err with\n  | Invalid_request -> print_endline \"Client got : Invalid request\"\n  | No_sources_config -> print_endline \"Client got : No config for sources\"\n  | Unknown -> print_endline \"Client got : Unknown error\");\n  Lwt.return_unit\n\n(** [send_generic_request ~request ~callback ~error] executes function that sends request [request] to search-api\n    and execute continuations according to the request result. When request is succesfull [callback] is applied \n    on response. Otherwise, [error] is applied on an [Data_types.server_error]. If no [error] argument was specified -\n    [default_error_handler] is used.*)\nlet send_generic_request :\n      'res.\n      request:(unit -> 'res response Lwt.t) ->\n      callback:('res -> unit Lwt.t) ->\n      ?error:(server_error_type -> unit Lwt.t) ->\n      unit ->\n      unit Lwt.t =\n fun ~request ~callback ?(error = default_error_handler) () ->\n  let%lwt resp = request () in\n  match resp with Ok res -> callback res | Error err -> error err\n\nlet error test n =\n  Printf.eprintf \"Error: request %s returned code %d\\n%!\" test n;\n  exit 2\n\nlet basic api =\n  begin_request ();\n  print_endline \"no lwt basic \";\n  EzRequest.ANY.get0 ~msg:\"simplest req possible\" api Services.version\n    ~error:(error \"even on the dummiest\") (function\n    | Ok r ->\n        Printf.eprintf \"Result for Simple req : %s\\n%!\"\n          (Utils.version_test_to_string r);\n        (* handle_response r *)\n        end_request ()\n    | Error e ->\n        Printf.eprintf \"%s\\n%!\" @@ \"very bad error even in basic req\";\n        (* handle_error e *)\n        end_request ())\n\nlet base_req arg api =\n  print_endline \"sending req ==> base req\";\n  EzReq_lwt.post0 ~msg:\"trying simple req\" ~input:arg ~url_encode:false\n    ~params:[] ~headers:[] api Services.version_test_json_body\n  >>= function\n  | Error err ->\n      print_endline \"bad error\";\n      (* Printf.eprintf \"%s\\n%!\" @@ Printexc.to_string (proofbox_api_error e); *)\n      handle_error err\n      (* Lwt.return_unit *)\n  | Ok e ->\n      (* print_endline \"ok got res\"; *)\n      Printf.eprintf \"getting db version %s\\n%!\"\n        (Utils.version_test_to_string e);\n      handle_response e\n(* Lwt.return_unit *)\n\nlet base_req2 arg api =\n  begin_request ();\n  print_endline \"sending ==> base_req2\";\n  EzRequest.ANY.post0 \n    ~msg:\"Testing simple req with EzRequest.ANY.post0 // \"\n    ~error:(error \"error classic req; no lwt //\")\n    ~input:arg \n    api \n    Services.version_test_json_body \n    (function\n    | Error e ->\n        Printf.eprintf \"%s\\n%!\" @@ Printexc.to_string (proofbox_api_error e);\n        end_request ()\n    | Ok r ->\n        Printf.eprintf \"Test test3 returned %s\\n%!\"\n          (Utils.version_test_to_string r);\n        end_request ())\n\nlet () =\n  Printexc.record_backtrace true;\n  EzCohttp.init ();\n  let api = Printf.sprintf \"http://localhost:%d\" !api_port in\n  print_endline (\"sending req 0 to \" ^ api);\n  let api = BASE api in\n\n  let requests =\n       [ base_req2 { basic = \"okok\" }; (* base_req2 { basic = \"okok\" }; *) basic; ]\n     in\n     List.iter (fun test -> test api) requests;\n     if !nrequests > 0 then (\n       waiting := true;\n       EzLwtSys.run (fun () -> waiter)\n    );\n  (* Lwt.async\n  @@ send_generic_request\n       ~request:(fun () -> base_req { basic = \"okok\" } api)\n       ~callback:(fun res ->\n         print_endline (Utils.version_test_to_string res);\n         Lwt.return_unit)\n       ~error:(fun err ->\n         match err with\n         | Unknown ->\n             print_endline \"this is an Unknown error\";\n             Lwt.return_unit\n         | Invalid_request ->\n             print_endline \"invalid request\";\n             Lwt.return_unit\n         | No_sources_config ->\n             print_endline \"no sources config\";\n             Lwt.return_unit);\n  let _ = base_req { basic = \"okok\" } api in\n  () *)\n"}}}
Found a `dune` file at /home/elias/OCP/ez_pb_client/src/reqs
]] Making a new jbuilder package at /home/elias/OCP/ez_pb_client/src/reqs
=== Project root: /home/elias/OCP/ez_pb_client
Detected `opam` dependency manager for local use
Sending notification {"jsonrpc": "2.0", "method": "window/showMessage", "params": {"type": 1, "message": "Unable to read /home/elias/OCP/ez_pb_client/src/reqs/.merlin"}}
Read message 
{"jsonrpc":"2.0","id":1,"method":"textDocument/codeAction","params":{"textDocument":{"uri":"file:///home/elias/OCP/ez_pb_client/src/reqs/reqs.ml"},"range":{"start":{"line":188,"character":16},"end":{"line":188,"character":16}},"context":{"diagnostics":[]}}}
[server] Got a method textDocument/codeAction
[server] processing took 0.00214576721191ms
Found a `dune` file at /home/elias/OCP/ez_pb_client/src/reqs
]] Making a new jbuilder package at /home/elias/OCP/ez_pb_client/src/reqs
=== Project root: /home/elias/OCP/ez_pb_client
Detected `opam` dependency manager for local use
Sending response {"id": 1, "jsonrpc": "2.0", "error": {"code": -32603, "message": "Unable to read /home/elias/OCP/ez_pb_client/src/reqs/.merlin"}}
Read message 
{"jsonrpc":"2.0","method":"$/setTraceNotification","params":{"value":"off"}}
Read message 
{"jsonrpc":"2.0","method":"workspace/didChangeConfiguration","params":{"settings":{"reason_language_server":{"location":"","build_system_override_by_root":{},"refmt":"","lispRefmt":"","mlfmt":"","format_width":80,"per_value_codelens":false,"dependencies_codelens":true,"opens_codelens":true,"show_module_path_on_hover":true,"reloadOnChange":false,"show_debug_errors":false,"autoRebuild":true}}}}
Found a `dune` file at /home/elias/OCP/ez_pb_client/src/reqs
]] Making a new jbuilder package at /home/elias/OCP/ez_pb_client/src/reqs
=== Project root: /home/elias/OCP/ez_pb_client
Detected `opam` dependency manager for local use
Read message 
{"jsonrpc":"2.0","id":2,"method":"textDocument/codeAction","params":{"textDocument":{"uri":"file:///home/elias/OCP/ez_pb_client/src/reqs/reqs.ml"},"range":{"start":{"line":188,"character":16},"end":{"line":188,"character":16}},"context":{"diagnostics":[]}}}
[server] Got a method textDocument/codeAction
[server] processing took 0.00715255737305ms
Found a `dune` file at /home/elias/OCP/ez_pb_client/src/reqs
]] Making a new jbuilder package at /home/elias/OCP/ez_pb_client/src/reqs
=== Project root: /home/elias/OCP/ez_pb_client
Detected `opam` dependency manager for local use
Sending response {"id": 2, "jsonrpc": "2.0", "error": {"code": -32603, "message": "Unable to read /home/elias/OCP/ez_pb_client/src/reqs/.merlin"}}
Read message 
{"jsonrpc":"2.0","id":3,"method":"textDocument/documentSymbol","params":{"textDocument":{"uri":"file:///home/elias/OCP/ez_pb_client/src/reqs/reqs.ml"}}}
[server] Got a method textDocument/documentSymbol
[server] processing took 0.00596046447754ms
Found a `dune` file at /home/elias/OCP/ez_pb_client/src/reqs
]] Making a new jbuilder package at /home/elias/OCP/ez_pb_client/src/reqs
=== Project root: /home/elias/OCP/ez_pb_client
Detected `opam` dependency manager for local use
Sending response {"id": 3, "jsonrpc": "2.0", "error": {"code": -32603, "message": "Unable to read /home/elias/OCP/ez_pb_client/src/reqs/.merlin"}}
Read message 
{"jsonrpc":"2.0","id":4,"method":"textDocument/codeLens","params":{"textDocument":{"uri":"file:///home/elias/OCP/ez_pb_client/src/reqs/reqs.ml"}}}
[server] Got a method textDocument/codeLens
[server] processing took 0.00190734863281ms
Found a `dune` file at /home/elias/OCP/ez_pb_client/src/reqs
]] Making a new jbuilder package at /home/elias/OCP/ez_pb_client/src/reqs
=== Project root: /home/elias/OCP/ez_pb_client
Detected `opam` dependency manager for local use
Sending response {"id": 4, "jsonrpc": "2.0", "result": [{"range": {"start": {"line": 0, "character": 0}, "end": {"line": 0, "character": 0}}, "command": {"title": "Unable to load compilation data: Unable to read /home/elias/OCP/ez_pb_client/src/reqs/.merlin", "command": ""}}]}
Read message 
{"jsonrpc":"2.0","id":5,"method":"textDocument/codeLens","params":{"textDocument":{"uri":"file:///home/elias/OCP/ez_pb_client/src/reqs/reqs.ml"}}}
[server] Got a method textDocument/codeLens
[server] processing took 0.00381469726562ms
Found a `dune` file at /home/elias/OCP/ez_pb_client/src/reqs
]] Making a new jbuilder package at /home/elias/OCP/ez_pb_client/src/reqs
=== Project root: /home/elias/OCP/ez_pb_client
Detected `opam` dependency manager for local use
Sending response {"id": 5, "jsonrpc": "2.0", "result": [{"range": {"start": {"line": 0, "character": 0}, "end": {"line": 0, "character": 0}}, "command": {"title": "Unable to load compilation data: Unable to read /home/elias/OCP/ez_pb_client/src/reqs/.merlin", "command": ""}}]}
Read message 
{"jsonrpc":"2.0","id":6,"method":"textDocument/hover","params":{"textDocument":{"uri":"file:///home/elias/OCP/ez_pb_client/src/reqs/reqs.ml"},"position":{"line":153,"character":2}}}
[server] Got a method textDocument/hover
[server] processing took 0.00286102294922ms
Found a `dune` file at /home/elias/OCP/ez_pb_client/src/reqs
]] Making a new jbuilder package at /home/elias/OCP/ez_pb_client/src/reqs
=== Project root: /home/elias/OCP/ez_pb_client
Detected `opam` dependency manager for local use
Sending response {"id": 6, "jsonrpc": "2.0", "error": {"code": -32603, "message": "Unable to read /home/elias/OCP/ez_pb_client/src/reqs/.merlin"}}
Read message 
{"jsonrpc":"2.0","method":"$/setTraceNotification","params":{"value":"off"}}
Read message 
{"jsonrpc":"2.0","method":"workspace/didChangeConfiguration","params":{"settings":{"reason_language_server":{"location":"","build_system_override_by_root":{},"refmt":"","lispRefmt":"","mlfmt":"","format_width":80,"per_value_codelens":false,"dependencies_codelens":true,"opens_codelens":true,"show_module_path_on_hover":true,"reloadOnChange":false,"show_debug_errors":false,"autoRebuild":true}}}}
Read message 
{"jsonrpc":"2.0","id":7,"method":"shutdown","params":null}
Sending response {"id": 7, "jsonrpc": "2.0", "result": null}
